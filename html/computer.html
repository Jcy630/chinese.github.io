<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>网页入口</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<link rel="stylesheet" href="../css/reset.css">
		<link rel="stylesheet" href="../css/style.css">
	</head>

	<body>
		<div id="body">
			<iframe src="homepage.html" id="mainiframe" name="mainiframe" width="100%" height="100%"
				onLoad="iFrameHeight()" frameborder="0" scrolling="no"> </iframe>

		</div>

		<script type="text/javascript">
			// body宽高
			let cw = 1920,
				ch = 1080
			let body = document.getElementById('body')
			body.style.width = `${cw}px` //设置或返回块级元素或绝对/固定位置的元素的宽度
			body.style.height = `${ch}px` //设置或返回块级元素或绝对/固定位置的元素的高度

			// 对body进行缩放
			function windowResize() {
				// 窗口宽高
				let w = window.innerWidth,
					h = window.innerHeight //文档显示区的宽度与高度
				// 缩放比例
				let r = w / cw < h / ch ? w / cw : h / ch

				body.style.transform = `scale( ${r})`
				// 因为scale是以body的原中心点为基准进行缩放，所以缩放之后需要调整外边距，使其位于窗口的中心位置
				body.style.marginLeft = (-(cw - r * cw) / 2 + (w - r * cw) / 2) + 'px' //设置元素的左外边距
				body.style.marginTop = (-(ch - r * ch) / 2 + (h - r * ch) / 2) + 'px' //设置元素的上外边距
				body.style.marginBottom = (-(h > ch ? h : ch - r * ch)) + 'px' //设置元素的下外边距
				body.style.marginRight = (-(w > cw ? w : cw - r * cw)) + 'px' //设置元素的右外边距
			}

			windowResize()
			// 监听窗口尺寸变化
			window.addEventListener('resize', windowResize);
		</script>

		<script type="text/javascript" language="javascript">
			function iFrameHeight() {
				var ifm = document.getElementById("mainiframe");
				var subWeb = document.frames ? document.frames["mainiframe"].document : ifm.contentDocument;
				if (ifm != null && subWeb != null) {
					ifm.height = subWeb.body.scrollHeight;
				}
			}
			window.onresize = function() {
				iFrameHeight();
			}
		</script>
	</body>
</html>
